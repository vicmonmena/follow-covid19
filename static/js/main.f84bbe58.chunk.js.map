{"version":3,"sources":["components/stat.jsx","components/countries.jsx","components/cssselector.jsx","App.js","index.js"],"names":["Stat","title","value","className","from","number","to","config","delay","Intl","NumberFormat","format","formatValue","toFixed","toUpperCase","Countries","selectedCountry","handleSelectCountry","useState","countries","setCountries","loading","setLoading","formatCountries","data","map","country","name","iso3","useEffect","a","fetch","then","res","json","catch","err","console","log","countryList","undefined","concat","fetchData","id","onChange","event","target","key","CSSselector","selectedCSS","handleSelectCSS","url","setUrl","style","marginLeft","href","rel","App","empty","confirmed","recovered","deaths","stats","setStats","setConfirmed","setRecovered","setDeaths","Date","lastUpdate","setLastUpdate","setSelectedCountry","setSelectedCSS","loadData","error","dateString","d","ye","DateTimeFormat","year","mo","month","da","day","hr","hour","mn","minute","sc","second","formatDate","window","location","reload","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f84bbe58.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Spring} from 'react-spring/renderprops'\nimport './components.css'\n\nconst Stat = ({title = \"no title\", value = 0}) => {\n\n  function formatValue(value) {\n    return new Intl.NumberFormat(\"es-ES\").format(value)\n  }\n\n  return (\n    <div className=\"stat\">\n        <Spring \n          from={{ number: 0 }}\n          to={{ number: value }}\n          config={{delay: 300}}>\n            {({number}) => <h2 >{formatValue(number.toFixed(0))}</h2>}\n        </Spring>\n       <h5 >{title.toUpperCase()}</h5>\n    </div>\n  );\n};\n\nStat.propTypes = {\n  title: PropTypes.string,\n  value: PropTypes.number\n};\n\nexport default Stat;","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nconst Countries = ({selectedCountry = \"Spain\", handleSelectCountry}) => {\n\n  // const [url, setUrl] = useState('https://covid19.mathdro.id/api/countries');\n  const [countries, setCountries] = useState([]);\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    async function fetchData() {\n      setLoading(true);\n      const data = await fetch('https://covid19.mathdro.id/api/countries')\n        .then(res => res.json())\n        .catch(err => {\n          console.log(err)\n        });\n        const countryList = data !== undefined ? formatCountries(data.countries) : []\n        setCountries(data !== undefined ? [{name: 'MUNDIAL', value: \"md\"}].concat(countryList) : {'Error loading countries': 'err'});\n      setLoading(false);\n    }\n    fetchData();\n  }, []);\n\n  function formatCountries(data) {\n    return data.map(country => ({ name: country.name, value: country.iso3 }))\n  }\n\n  function handleChangeCountry(event) {\n    if(event.target.value===selectedCountry) return false;\n    else {\n      handleSelectCountry(event.target.value)\n    }\n  }\n\n  return (\n    <div className=\"topright\">\n      { loading === true && \n        <p>Cargando países ...</p>\n      }\n      { loading ===false && \n        <select \n          id=\"country\"\n          onChange={handleChangeCountry}\n          value={selectedCountry}>\n          {\n            countries.map(country => <option key={country.name} value={country.name}>{country.name}</option>)\n          }\n        </select>\n      }\n    </div>\n  );\n};\n\nCountries.propTypes = {\n  selectedCountry: PropTypes.string,\n  handleSelectCountry: PropTypes.func.isRequired\n};\n\nexport default Countries;","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport './components.css'\n\nconst CSSselector = ({selectedCSS = \"flat\", handleSelectCSS}) => {\n  const [url, setUrl] = useState('https://drasite.com/flat-remix-css')\n\n  useEffect(() => {\n    setUrl(selectedCSS === \"skeuos\" ? \"https://drasite.com/skeuos-css\" : \"https://drasite.com/flat-remix-css\")\n  }, [selectedCSS]);\n\n  function handleChangeCSS(event) {\n    if(event.target.value===selectedCSS) return false;\n    else {\n      handleSelectCSS(event.target.value)\n    }\n  }\n\n  return (\n    <div className=\"cssselector\">\n      <span className=\"cssselector-title\">\n        Cómo quieres ver esta web\n      </span>\n      <select \n        id=\"cssselector\"\n        onChange={handleChangeCSS}\n        value={selectedCSS}>\n          <option key=\"flat\" value=\"flat\">Flat Remix</option>\n          <option key=\"skeuos\" value=\"skeuos\">Skeuomorphic</option>\n      </select>\n      <a style={{marginLeft: \"10px\"}} href={url} target=\"_blank\" rel=\"noopener noreferrer\">info</a>\n    </div>\n  );\n};\n\nCSSselector.propTypes = {\n  selectedCSS: PropTypes.string,\n  handleChangeCSS: PropTypes.func\n};\n\nexport default CSSselector;","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Stat from './components/stat';\nimport Countries from './components/countries';\nimport CSSselector from './components/cssselector';\n\nfunction App() {\n\n  const empty = {\n    confirmed: {value: 0},\n    recovered: {value: 0},\n    deaths: {value: 0}\n  }\n\n  const [url, setUrl] = useState('https://covid19.mathdro.id/api')\n  const [stats, setStats] = useState(empty);\n  const [loading, setLoading] = useState(false)\n  const [confirmed, setConfirmed] = useState({value: 0})\n  const [recovered, setRecovered] = useState({value: 0})\n  const [deaths, setDeaths] = useState({value: 0})\n  const [lastUpdate, setLastUpdate] = useState(new Date())\n  const [selectedCountry, setSelectedCountry] = useState(\"Spain\")\n  const [selectedCSS, setSelectedCSS] = useState(\"flat\")\n  \n  useEffect(() => {\n    import('./css/flat/flat-remix.css');\n  }, []);\n\n  useEffect(() => {\n    loadData(url)\n  }, [url]);\n\n  useEffect(() => {\n    if (stats !== undefined && stats.error === undefined) {\n      setConfirmed(stats.confirmed)\n      setRecovered(stats.recovered)\n      setDeaths(stats.deaths)\n      setLastUpdate(stats.lastUpdate ?? 'no info')\n    } else {\n      setConfirmed({value: 0})\n      setRecovered({value: 0})\n      setDeaths({value: 0})\n      setLastUpdate('no info')\n    }\n  }, [stats])\n\n  useEffect(() => {\n    if (selectedCountry.toUpperCase() === \"MUNDIAL\") setUrl('https://covid19.mathdro.id/api')\n    else setUrl(`https://covid19.mathdro.id/api/countries/${selectedCountry}`)\n  }, [selectedCountry])\n\n  function loadData(url) {\n    async function fetchData() {\n      setLoading(true);\n      const data = await fetch(url)\n        .then(res => res.json())\n        .catch(err => {\n          console.log(\"err: \", err)\n        });\n      setStats(data !== undefined ? data : empty);\n      setLoading(false);\n    }\n    fetchData();\n  }\n\n  function formatDate(dateString) {\n    if (dateString) {\n      try {\n        const d = new Date(dateString)\n        const ye = new Intl.DateTimeFormat('es-ES', { year: 'numeric' }).format(d)\n        const mo = new Intl.DateTimeFormat('es-ES', { month: 'long' }).format(d)\n        const da = new Intl.DateTimeFormat('es-ES', { day: '2-digit' }).format(d)\n        const hr = new Intl.DateTimeFormat('es-ES', { hour: 'numeric' }).format(d)\n        const mn = new Intl.DateTimeFormat('es-ES', { minute: 'numeric' }).format(d)\n        const sc = new Intl.DateTimeFormat('es-ES', { second: 'numeric' }).format(d)\n        return `${da}-${mo}-${ye} a las ${hr}:${mn}:${sc}`\n      } catch (error) {\n        return 'No hay fecha'\n      }\n    } else {\n      return 'No hay fecha'\n    }\n  }\n\n  /**\n   * Maneja el valor del país seleccionado\n   *\n   * @param {*} selectedCountry\n   */\n  function handleSelectCountry(selectedCountry) {\n    setSelectedCountry(selectedCountry)\n  }\n\n  /**\n   * Maneja el valor del tipo de hoja de estilo (CSS Stylesheet) seleccionada\n   *\n   * @param {*} selectedCSS\n   */\n  function handleSelectCSS(selectedCSS) {\n    switch (selectedCSS) {\n      case \"skeuos\":\n        setSelectedCSS(selectedCSS)\n        import('./css/skeuos/skeuos.css');\n        break;\n      default:\n        setSelectedCSS(selectedCSS)\n        window.location.reload(false);\n        // await import('./css/flat/flat-remix.css');\n        break;\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>Seguimiento sobre el COVID-19 (Nuevo CORONAVIRUS)</h1>\n      <Countries \n        selectedCountry={selectedCountry}\n        handleSelectCountry={handleSelectCountry} \n      />\n      <h3>A continuación mostramos las estadísticas sobre los casos...</h3>\n      {loading === false && \n        <label>Última actualización: {formatDate(lastUpdate)}</label>\n      }\n      { loading === true && \n        <p>Cargando ...</p>\n      }\n      { loading ===false && \n        <div className=\"paper stats\">\n          <Stat \n            title=\"Confirmados\"\n            value={confirmed.value}\n          />\n          <Stat \n            title=\"Recuperados\"\n            value={recovered.value}\n          />\n          <Stat \n            title=\"Fallecidos\"\n            value={deaths.value}\n          />\n        </div>\n      }\n      <div className=\"footer\">\n        <CSSselector \n          handleSelectCSS={handleSelectCSS}\n          selectedCSS={selectedCSS}\n        />\n        <div className=\"code-available\">\n          <h5>El código de esta web está disponible en <a href=\"https://github.com/vicmonmena/follow-covid19\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a>.</h5>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}